<script>
async function load(){
  try{
    const d = await fetch("/api/dashboard");
    if(!d.ok) throw new Error("Server error");
    const data = await d.json();

    log.innerHTML =
      "<tr><th>Tên</th><th>Loại</th><th>Lý do</th><th>Thời gian</th></tr>" +
      data.logs.map(l =>
        `<tr>
          <td>${l.name}</td>
          <td>${l.type}</td>
          <td>${l.reason || ""}</td>
          <td>${l.time}</td>
        </tr>`
      ).join("");

    res.innerHTML =
      "<tr><th>Tên</th><th>Điểm</th><th>KQ</th><th>Thời gian</th></tr>" +
      data.results.map(r =>
        `<tr>
          <td>${r.name}</td>
          <td>${r.score}</td>
          <td>${r.result}</td>
          <td>${r.time}</td>
        </tr>`
      ).join("");
  }catch(err){
    console.warn("⚠️ Không kết nối được server");
  }
}

setInterval(load, 2000);
load();
</script>
